<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>De que se trata Navigator API</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet"> 
    <link rel="stylesheet" href="style.css">
</head>
<body>
    
    <header class="header-site">
        <h1>API Navigator</h1>
    </header>

    <section class="container">
        <h3>Propiedades experimentales JavaScript</h3>
        <br>
        <br>
        <br>
        <br>
        <header>
            <h2>Introducción a la API Navigator</h2>
        </header>
        <div class="web-share">
            <img src="https://dkofva0t6jnyn.cloudfront.net/sites/default/files/styles/amp_blog_image_large/public/consumer/blog/csm-blog/parentsultimateguide-minecraft-blog.jpg" alt="XD" />
            <button id="btn-search">Presione para compartir</button>            
            <button id="btn-search2">Presione para compartir el archivo</button>            
        </div>

    </section>

    <script>

        const $btn = document.getElementById('btn-search')
        const $btn2 = document.getElementById('btn-search2')

        console.log(Navigator)

        const shareData = {
            title: 'Maincra',
            text: 'Un video Juego v:v v:',
            url: 'https://miguel2351.vercel.app'
        }


        async function shareFile() {
            const request = await fetch('https://miguelhg2351.github.io/navigator-api/images/escuela.jpg')
            const response = await request.blob()
            const file = new File([response], 'file_images.jpg', { type: 'image/jpeg',  })
            const fileArray = [file]
            await navigator.share({...shareData, file: fileArray})
        }

        // Primer Método, con Async Await

        // Web share esta disponible desde chrome 76

        $btn.addEventListener('click', async () => {
            if ('share' in navigator ) {
                await navigator.share(shareData)
            } else if(navigator.platform === 'Win32' ) {
                console.log('Usted esta en el ordenador')
            } else {
                console.log('Usted no tiene disponible esta funcionalidad')
            }
            
        })

        $btn2.addEventListener('click', shareFile)

    </script>

</body>
</html>